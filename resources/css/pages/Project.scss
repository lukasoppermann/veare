/* ====================================
    PROJECT Page
==================================== */
.Project {
  .Boxed-group {
    grid-column: columns;
  }
}
.Project__challenge {
  hyphens: auto;
  margin-top: size(10);
  grid-column: column 1 / column 5;
  @include max-width('xs') {
    grid-column: columns;
  }
  h2 {
    margin-top: 0;
  }
}
.Project__toc {
  margin-top: size(10);
  grid-column: column 6 / column 8;
  @include max-width('l') {
    grid-column: column 5 / column 8;
  }
  @include max-width('xs') {
    grid-column: columns;
  }
}
.Project__pagination {
  z-index: 900;
  top: 200px;
  position: sticky;
  margin-top: 0;
}
.Project__pagination-container {
  display: block;
  position: absolute;
  margin-top: -4px; // to align with TOC
  @include max-width('s') {
    display: none;
  }
}
.Project__back_link {
  display: block;
  grid-column: columns;
  text-decoration: none;
  font-family: var(--font-montserrat);
  font-weight: var(--font-montserrat-bold);
  text-transform: uppercase;
  letter-spacing: .5px;
  @include type-scale(sm);
  margin-top: size(3);
  margin-bottom: size(15);
}
// NEW Project page

/* ====================================
    Tilted Title
==================================== */
@mixin titled-title {
  display: flex;
  height: size(2);
  overflow: visible;
  grid-column-start: sidebar-left 1;
  width: 300px;
  transform-origin: top left;
  transform: rotate(90deg) translateY(-100%);
  @include max-width('s') {
    grid-column: columns;
    grid-row-start: auto;
    transform: rotate(0deg);
    margin-bottom: size(2);
  }
  counter-increment: titled-title-counter;
  font-family: var(--font-montserrat);
  font-weight: var(--font-montserrat-bold);
  text-transform: uppercase;
  letter-spacing: .5px;
  @include type-scale(sm);
  flex: 0 0 auto;
  margin-top: var(--section-gap);
  margin-bottom: 0;
  a {
    padding-right: size(1);
  }
  &::before {
    @include pseudo("relative");
    order: 2;
    height: 2px;
    width: size(5);
    align-self: center;
    transform: translateY(3px);
    background-color: rgb(var(--black-rgb));
  }
  &::after {
    font-family: var(--font-montserrat);
    font-weight: var(--font-montserrat-bold);
    text-transform: uppercase;
    letter-spacing: .5px;
    @include type-scale(sm);
    order: 3;
    padding-left: size(1);
    content: counter(titled-title-counter, decimal-leading-zero);
    font-feature-settings: "tnum", "zero";
  }
}

/* ====================================
    PROJECT
==================================== */
.Project .Page {
  @include smaller_than(desktop) {
    padding: 0 size(2);
  }
  --section-gap: 12;
  --row-gap: 0;
  --rule-color: var(--project-color, rgb(var(--blue-rgb)));
  h2,
  h3,
  h4,
  h5,
  p,
  blockquote {
    grid-column: columns / span 5;
    @include max-width('m') {
      word-break: break-word;
      grid-column: columns / span 6;
    }
    @include max-width('xs') {
      word-break: break-word;
      grid-column: columns;
    }
  }
  .Project__title {
    font-family: var(--font-montserrat);
    font-weight: var(--font-montserrat-bold);
    letter-spacing: .5px;
    @include type-scale(title);
    color: rgb(var(--white-rgb));
    margin: 0;
    position: absolute;
    z-index: 100;
    bottom: size(8);
    @include smaller_than(desktop) {
      @include type-scale(hg);
      left: size(3);
      bottom: size(2);
    }
  }
  h3 {
    @include font(sans);
    @include type-scale(lg);
    margin-top: size(3);
    color: rgb(var(--black-rgb));
  }
  h4 {
    margin-top: size(5);
    @include font(sans, bold);
    @include type-scale(md);
    color: rgb(var(--black-rgb));
  }
  h5 {
    font-family: var(--font-montserrat);
    font-weight: var(--font-montserrat-bold);
    text-transform: uppercase;
    letter-spacing: .5px;
    @include type-scale(sm);
    margin-top: size(4);
    grid-column: columns;
    color: rgb(var(--black-rgb));
  }
  h6 {
    @include titled-title;
    color: rgb(var(--black-rgb)) !important;
    @include smaller_than(desktop) {
      margin-top: size(10);
    }
  }
  h6 + h5 {
    @include min-width('s') {
      margin-top: size(8);
    }
  }
  :not(.Annotation) > p {
    @include font(sans);
    @include type-scale(md);
    color: rgba(var(--black-rgba-80));
  }
  blockquote {
    hyphens: auto;
    overflow-wrap: break-word;
    @include max-width('xxs') {
      @include type-scale(md);
    }
    margin-top: size(3);
    p {
      color: rgb(var(--black-rgb));
      @include font(sans);
      @include type-scale(xl);
      @include max-width('xxs') {
        @include type-scale(lg);
      }
    }
  }
  p:not(:first-child) {
    margin-top: size(2);
  }
  figure + p:not(:first-child) {
    margin-top: size(4);
  }
  .Rule--horizontal {
    grid-column: columns;
  }
  .Block {
    grid-column: full-bleed;
  }
}
